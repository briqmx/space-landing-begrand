---
import Layout from '../layouts/Layout.astro'
import Nav from '../components/Nav.astro'
import Steps from '../components/Steps.astro'

import projects from '../../data/projects.json'
import faqs from '../../data/faqs.json'
---

<Layout title="Sumametros® | La nueva forma de invertir en depas y hacer crecer tu patrimonio, metro a metro.">

  <div class="bg-blue text-white p-3 flex items-center justify-center gap-2 text-xs md:text-sm">
    <p>Solicitar información al</p>
    <a href="tel:8004793103" class="underline flex items-center gap-1">
      <i class="fa-solid fa-phone text-xs mt-1"></i>
      <span>800 479 3103</span>
    </a>
  </div>

  <Nav />

  <!-- Hero Section -->
  <section class="py-16 relative">
    <div class="container">
      <div class="flex flex-col items-center gap-8 max-w-2xl mx-auto text-center bg-white z-10 relative p-4 md:p-8 rounded-xl">

        <h1 class="text-xl md:text-3xl font-bold text-balance">Compra tu departamento poco a poco y genera rentas + plusvalía en el proceso.</h1>
        <p class="text-balance leading-relaxed">Empieza con 1 m² y recibe rentas inmediatas. Acumula metros a tu ritmo para usarlos como enganche o intercambiar por un departamento.</p>
        <a class="button" href="#propiedades">Elige con cuántos m² empezar</a>

        <a class="flex items-center gap-2 text-xs md:text-sm underline" href="#quienes">
          <p>Operado por</p>
          <img src="/logo-begrand-horizontal.png" alt="Logo" class="h-4 md:h-6" />
          <p>a través de</p>
          <img src="/logo-briq.svg" alt="Logo" class="h-4 md:h-6" />
        </a>
        

        <figure class="aspect-video bg-black w-full relative rounded-xl flex items-center justify-center">
          <img src="/video-cover.jpg" alt="Hero" class="absolute inset-0 h-full w-full object-cover rounded-xl" />
          <!-- Play button -->
           <button id="play-video-btn" class="bg-white size-20 absolute rounded-full flex items-center justify-center hover:scale-105 transition-transform">
            <i class="fa-solid fa-play text-blue text-2xl"></i>
           </button>
        </figure>
      </div>
    </div>

    <img src="/piece-1.svg" alt="Hero" class="absolute top-2 left-2 opacity-0 md:opacity-100 pointer-events-none" />
    <img src="/piece-2.svg" alt="Hero" class="absolute top-2 right-2 opacity-0 md:opacity-100 pointer-events-none" />
    <img src="/piece-3.svg" alt="Hero" class="absolute bottom-2 left-2 opacity-0 md:opacity-100 pointer-events-none" />
    <img src="/piece-4.svg" alt="Hero" class="absolute bottom-2 right-2 opacity-0 md:opacity-100 pointer-events-none" />
  </section>


  <section class="py-16 border-t border-b border-black/10" id="como-funciona">
    <div class="container">
      <div class="md:max-w-[50%] w-full text-balance mb-8">
        <h2 class="font-bold text-blue">¿Cómo funciona?</h2>
        <p class="text-2xl font-bold">Comprar un departamento nunca ha sido tan fácil</p>
      </div>

      <Steps />
    </div>
  </section>

  <section class="py-16" id="propiedades">
    <div class="container">
      <div class="md:max-w-[50%] w-full text-balance mb-8">
        <h2 class="font-bold text-blue">Propiedades disponibles</h2>
        <p class="text-2xl font-bold">Explora dónde comprar tu primer m² y comienza a recibir rentas. Cambia a un departamento cuando estés listo.</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        {projects.map((project, index) => (
          <article class="flex flex-col gap-2 items-start">
            <figure class="aspect-[4/3] relative rounded-xl overflow-hidden w-full h-full">
              <img src={project.image} alt={project.title} class="object-cover w-full h-full absolute inset-0" />
              <div class="absolute inset-0 rounded-xl border border-black/20"></div>
            </figure>
            <div>
              <h3 class="font-bold">{project.title}</h3>
              <p class="text-sm">{project.location}</p>
            </div>
            <p class="font-bold">Desde ${project.price.toLocaleString('es-MX')} mxn/m²</p>
            <a href={project.url} class="button">Ver detalles</a>
          </article>
        ))}
        <div class="bg-blue text-white w-full h-full  md:col-span-2 rounded-xl flex flex-col gap-2 items-center justify-center p-8 relative">
          <div class="flex flex-col gap-2 items-center justify-center relative z-10 text-center">
            <p class="font-bold">¿No sabes cuál elegir?</p>
            <p>No tienes que decidir ahora: tus m² son flexibles y podrás elegir en qué departamento usarlos cuando estés listo para dar el siguiente paso.</p>
            <button class="button--secondary" onclick="document.getElementById('contactModal').showModal()">Hablar con un asesor</button>
          </div>
          <img src="/cta-piece-top.svg" alt="Arrow right" class="absolute top-2 left-2 opacity-0 md:opacity-10 pointer-events-none" />
          <img src="/cta-piece-bottom.svg" alt="Arrow right" class="absolute bottom-2 right-2 opacity-0 md:opacity-10 pointer-events-none" />
        </div>
      </div>
    </div>
  </section>

  <section class="py-16">
    <div class="container">
      <div class="md:max-w-[50%] w-full text-balance mb-8">
        <h2 class="font-bold text-blue">Ventajas de invertir en Sumametros</h2>
        <p class="text-2xl font-bold">¿Cómo puedo utilizar mis metros?</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <article class="bg-blue text-white p-8 md:p-16 rounded-xl flex flex-col gap-2 aspect-[4/3] relative justify-end">
          <div class="relatice z-1 flex flex-col gap-4 items-start">
            <img src="/feature-image-1.svg" alt="Canjealos por un departamento." class="h-32" />
            <h3 class="font-bold text-2xl">Canjealos por un departamento.</h3>
            <p class="text-pretty text-lg">Usa tus metros como enganche o pago total de un departamento completo, una vez que hayas acumulado los suficientes.</p>
          </div>

          <img src="/cta-piece-top.svg" alt="Arrow right" class="absolute top-2 left-2 opacity-0 md:opacity-10" />
        </article>
        <article class="bg-orange text-white p-8 md:p-16 rounded-xl flex flex-col gap-2 aspect-[4/3] relative justify-end">
          <div class="relatice z-1 flex flex-col gap-4 items-start">
            <img src="/feature-image-2.svg" alt="Consérvalos y recibe rentas." class="h-32" />
            <h3 class="font-bold text-2xl">Consérvalos y recibe rentas.</h3>
            <p class="text-pretty text-lg">Vende tus metros en la plataforma y obtén la plusvalía acumulada desde que compraste.</p>
          </div>
          <img src="/cta-piece-bottom.svg" alt="Arrow right" class="absolute bottom-2 right-2 opacity-0 md:opacity-10" />
        </article>
      </div>
    </div>
  </section>

  <section class="py-16">
    <div class="container">
      <div class="bg-gray p-10 md:p-16 rounded-xl flex flex-col gap-4 text-center">
        <div class="md:max-w-[100%] lg:max-w-[60%] w-full mx-auto text-pretty flex flex-col gap-4">
          <div class="flex items-center gap-8 md:gap-16 justify-center flex-wrap w-full">
            <img src="/cnbv.jpg" alt="cnbv" class="h-12 md:h-24 mix-blend-multiply" />
            <img src="/shcp.svg" alt="shcp" class="h-5 md:h-12 mix-blend-multiply" />
            <img src="/banco-mexico.svg" alt="banco-mexico" class="h-4 md:h-12 mix-blend-multiply" />
            <img src="/condusef.jpg" alt="condusef" class="h-8 md:h-12 mix-blend-multiply" />
          </div>
          <h3 class="font-bold text-2xl">Sumametros es una opción segura y confiable</h3>
          <p>Tu compra e inversión en Sumametros se realiza a través de briq.mx, plataforma regulada por la Comisión Nacional Bancaria y de Valores (CNBV), lo que garantiza la legalidad de tu inversión.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="py-16" id="preguntas-frecuentes">
    <div class="container">
      <div class="md:max-w-[50%] w-full text-balance mb-8">
        <h2 class="font-bold text-blue">Preguntas frecuentes</h2>
        <p class="text-2xl font-bold">Resuelve tus dudas sobre Sumametros</p>
      </div>
      <article class="flex flex-col gap-2 p-8 rounded-xl bg-gray mb-8" id="quienes">
        <h3 class="font-bold">¿Quiénes administran Sumametros by Be Grand®?</h3>
        <p class="leading-relaxed">Sumametros es un proyecto operado por Be Grand<sup>®</sup> con la tecnología y respaldo de briq.mx.</p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
          <div class="flex flex-col gap-2">
            <figure class="h-20 flex items-center">
              <img src="/logo-begrand-horizontal.png" alt="Logo" class="h-10" />
            </figure>
            <p>Empresa mexicana, con 20 años de experiencia en el desarrollo y comercialización de proyectos inmobiliarios de alta calidad en zonas AAA en México y España.</p>
            <a class="underline" href="https://begrand.mx" target="_blank">Conoce más</a>
          </div>
          <div class="flex flex-col gap-2">
            <figure class="h-20 flex items-center">
              <img src="/logo-briq.svg" alt="Logo" class="h-10" />
            </figure>
            <p>Plataforma líder de financiamiento colectivo inmobiliario, regulada por las autoridades financieras (CNBV, CONDUSEF, Banxico y SHCP)</p>
            <a class="underline" href="https://www.briq.mx?referral_code=sumametros" target="_blank">Conoce más</a>
          </div>
        </div>
      </article>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {faqs.map((faq, index) => (
          <article class="flex flex-col gap-2 p-8 rounded-xl bg-gray">
            <h3 class="font-bold">{faq.question}</h3>
            <p class="leading-relaxed">{faq.answer}</p>
          </article>
        ))}
      </div>
    </div>
  </section>

  <footer class="py-16 rounded-t-3xl bg-gray flex flex-col gap-8">
    <div class="container">
      <div class="flex items-center justify-between flex-col md:flex-row gap-4">
        <img src="/logo-nav.png" alt="Logo" class="h-12" />
        <div class="flex items-center gap-2">
          <a href="tel:8004793103" class="bg-blue text-white px-4 py-2 rounded-full flex items-center gap-2 font-bold">
            <i class="fa-solid fa-phone text-xs mt-1"></i>
            <span>800 479 3103</span>
          </a>
          <a href="https://www.instagram.com/sumametros.mx" target="_blank" class="bg-blue text-white px-4 py-2 rounded-full flex items-center gap-2 font-bold">
            <i class="fa-brands fa-instagram text-xs mt-1"></i>
            <span>@sumametros.mx</span>
          </a>
        </div>
      </div>
    </div>
    <div class="container">
      <p class="text-sm text-center">Be Grand, Sumametros y briq.mx son marcas registradas. Todos los derechos son reservados.</p>
    </div>
  </footer>


  <!-- Contact Modal -->
  <dialog id="contactModal">
    <div class="bg-black/80 fixed inset-0 flex items-start md:items-center justify-center z-20">
      <div class="bg-white max-w-md w-full p-6 border rounded-t-2xl shadow-2xl absolute bottom-0 md:bottom-auto h-[90vh] md:h-auto md:rounded-b-2xl" id="contactModalContent">
        <div class="flex flex-col gap-4">
          <div class="flex justify-between gap-4">
            <h2 class="text-2xl font-brand font-bold">Habla con uno de nuestros asesores</h2>
            <button class="text-md shrink-0 bg-zinc-100 size-8 rounded-full border border-zinc-200 flex items-center justify-center" onclick="document.getElementById('contactModal').close()">
              <i class="fa-solid fa-times"></i>
            </button>
          </div>
          <p>Comunícate con nosotros uno de nuestros asesores te ayudará a resolver tus dudas.</p>
          <div class="bg-gray rounded-xl divide-y divide-black/10">
            <div class="p-4 flex items-center gap-2 justify-between">
              <p>Llama al</p>
              <a href="tel:8004793103" class="button flex-shrink-0 text-sm flex items-center gap-2" target="_blank">
                <i class="fa-solid fa-phone text-xs"></i>
                <span>800 479 3103</span>
              </a>
            </div>
            <div class="p-4 flex items-center gap-2 justify-between">
              <p>Envía un mensaje a WhatsApp</p>
              <a href="https://wa.me/528123456789" class="button flex-shrink-0 text-sm bg-green-600 flex items-center gap-2" target="_blank">
                <i class="fa-brands fa-whatsapp"></i>
                <span>Enviar mensaje</span>
              </a>
            </div>
          </div>
      </div>
    </div>
  </dialog>

  <!-- Video Modal -->
  <div class="fixed inset-0 z-20 items-center justify-center bg-black/90" id="video-modal" style="display: none;">
    <div class="relative aspect-video w-full bg-white shadow-xl md:h-[80vh] md:w-auto" id="video-container">
      <video controls class="absolute inset-0 h-full w-full" id="video">
        <source src="/video-ugc.mp4" type="video/mp4" />
      </video>
      <button class="absolute right-0 top-0 bg-white p-4 text-black" id="close-video">
        Cerrar
      </button>
    </div>
  </div>
</Layout>

<script is:inline>
  // Close the modal when the user clicks outside of it
  document.addEventListener('DOMContentLoaded', () => {
    const contactModal = document.getElementById('contactModal');
    const contactModalContent = document.getElementById('contactModalContent');
    
    if (contactModal && contactModalContent) {
      contactModal.addEventListener('click', (event) => {
        // Check if the click was outside the modal content
        if (!contactModalContent.contains(event.target)) {
          contactModal.close();
        }
      });
    }

    // Video modal functionality
    const openVideoButton = document.getElementById('play-video-btn');
    const videoModal = document.getElementById('video-modal');
    const closeVideoButton = document.getElementById('close-video');
    const video = document.getElementById('video');

    if (openVideoButton && videoModal && closeVideoButton && video) {
      // Open video modal when play button is clicked
      openVideoButton.addEventListener('click', () => {
        videoModal.style.display = 'flex';
        video.play();
      });

      // Close video modal when close button is clicked
      closeVideoButton.addEventListener('click', () => {
        videoModal.style.display = 'none';
        video.pause();
        video.currentTime = 0; // Reset video to beginning
      });

      // Close video modal when clicking outside the video container
      videoModal.addEventListener('click', (event) => {
        if (!event.target.closest('#video-container')) {
          videoModal.style.display = 'none';
          video.pause();
          video.currentTime = 0;
        }
      });

      // Close video modal with Escape key
      document.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && videoModal.style.display === 'flex') {
          videoModal.style.display = 'none';
          video.pause();
          video.currentTime = 0;
        }
      });
    }
  });
</script>