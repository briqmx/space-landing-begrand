---
import Layout from '../layouts/Layout.astro'
import text from '../../data/text.json'
import projects from '../../data/projects.json'
import faqs from '../../data/faqs.json'
import ProjectCard from '../components/ProjectCard.astro'
import { Icon } from 'astro-icon/components'
import Form from '../components/Form'
---

<Layout title="Inicio | Construye tu patrimonio metro a metro.">
	<main>
		<nav class="sticky top-0 z-20 border-b bg-white/90 py-3 backdrop-blur-md">
			<div class="mx-auto w-full max-w-screen-xl px-4">
				<div class="flex items-center justify-between">
					<div class="flex-shrink-0">
						<a href="/" class="inline-block">
							<img src="logo-nav.png" alt="Logo Briq" class="h-9" />
						</a>
					</div>
					<div class="flex items-center gap-4 text-sm">
						<div class="hidden items-center gap-4 md:flex">
							<a class="hover:text-primary" href="#propiedades">Propiedades</a>
							<div class="h-4 w-px bg-zinc-200"></div>
							<a class="hover:text-primary" href="#modal">Iniciar sesión</a>
						</div>
						<a
							class="inline-flex items-center justify-center gap-2 rounded-md border px-2 py-1 font-medium shadow-sm hover:bg-primary/10"
							href="#modal"
						>
							Registrarse
							<Icon name="tabler:arrow-right" />
						</a>
					</div>
				</div>
			</div>
		</nav>
		<!-- Hero Section -->
		<header class="py-8">
			<div class="mx-auto w-full max-w-screen-xl px-4">
				<div class="rounded-2xl border bg-zinc-50 p-8">
					<div class="flex flex-col items-center justify-between gap-4 md:flex-row">
						<div class="w-full">
							<div class="flex max-w-md flex-col items-start gap-4">
								<img src="logo-nav.png" alt="Logo Briq" class="h-8" />
								<h1 class="font-display text-4xl font-bold">
									{text.hero.title}
								</h1>
								<p class="leading-relaxed">
									{text.hero.description}
								</p>
								<div class="flex w-full flex-col gap-2 md:flex-row">
									<a
										class="inline-flex items-center justify-center gap-2 rounded-md bg-primary px-8 py-3 text-sm font-semibold text-white hover:bg-primary/90"
										href="#propiedades"
									>
										Compra tu primer metro
									</a>
									<!-- <button
										class="inline-flex items-center justify-center gap-2 rounded-md border border-primary px-8 py-3 text-sm font-semibold text-primary"
									>
										Ver video
										<Icon name="tabler:player-play-filled" class="h-4 w-4" />
									</button> -->
								</div>
								<!-- <div class="flex w-full flex-col gap-2 md:flex-row md:items-center">
									{
										text.hero.support.map((item) => (
											<div class="flex items-center gap-1 text-sm">
												<Icon name="tabler:check" class="h-5 w-5 text-primary" />
												<p>{item}</p>
											</div>
										))
									}
								</div> -->
							</div>
						</div>
						<div class="flex w-full items-center justify-center">
							<figure class="relative h-full w-full overflow-hidden rounded-xl border shadow-xl">
								<img src={text.hero.image.src} alt={text.hero.image.alt} />
								<article
									id="notification"
									class="fade-in absolute bottom-0 left-1/2 z-10 hidden w-full max-w-[320px] -translate-x-1/2 transform items-start gap-4 rounded-2xl border bg-white p-4 shadow-sm"
								>
									<figure
										class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-primary font-bold text-white"
										id="notification-avatar"
									>
										<span>G</span>
									</figure>
									<div class="flex flex-col gap-4">
										<p class="font-display text-sm font-bold">
											<span id="notification-name">Gabriela</span> ahora es dueña de <span
												id="notification-value">3m²</span
											> en <span id="notification-property">BeGrand® Reforma</span>
										</p>
										<div class="flex gap-4">
											<div class="flex flex-col gap-1">
												<p class="text-xs font-bold">Ganancias por Rentas</p>
												<Icon name="tabler:circle-check-filled" class="h-5 w-5 text-primary" />
											</div>
											<div class="flex flex-col gap-1">
												<p class="text-xs font-bold">Plusvalía</p>
												<Icon name="tabler:circle-check-filled" class="h-5 w-5 text-primary" />
											</div>
										</div>
									</div>
								</article>
							</figure>
						</div>
					</div>
				</div>
			</div>
		</header>
		<section class="py-8" id="propiedades">
			<div class="mx-auto w-full max-w-screen-xl px-4">
				<div class="grid grid-cols-1 gap-2 md:grid-cols-3">
					{
						text.cards.map((card) => (
							<article class="flex flex-col justify-between rounded-xl border px-6 py-8 shadow-sm">
								<div class="mb-4 flex flex-col items-start gap-2">
									<img src={card.icon} alt={card.title} class="h-12" />
									<h2 class="font-display font-bold">{card.title}</h2>
								</div>
								<p class="mb-2 text-sm text-zinc-500">{card.description}</p>
							</article>
						))
					}
				</div>
			</div>
		</section>
		<section class="border-y bg-zinc-50 py-16">
			<div class="mx-auto w-full max-w-screen-xl px-4">
				<h2 class="max-w-md font-display text-3xl font-bold">{text.properties.title}</h2>
				<div class="grid grid-cols-1 gap-8 py-16 md:grid-cols-3">
					{projects.map((project) => <ProjectCard project={project} />)}
				</div>
				<div class="flex flex-col gap-4 md:flex-row">
					{
						text.properties.blocks.map((block) => (
							<aritcle class="flex flex-col items-center gap-2 text-center">
								<Icon name={block.icon} class="h-6 w-6 text-primary" />
								<h3 class="font-display text-sm font-bold">{block.title}</h3>
								<p class="text-sm leading-relaxed">{block.description}</p>
							</aritcle>
						))
					}
				</div>
			</div>
		</section>
		<section class="py-16">
			<div class="mx-auto w-full max-w-screen-xl px-4">
				<div class="flex flex-col items-center justify-center gap-8">
					<div class="flex max-w-2xl flex-col gap-4 text-center">
						<h2 class="mx-auto max-w-md font-display text-2xl font-bold">
							{text.comparative.title}
						</h2>
						<p>
							{text.comparative.description}
						</p>
					</div>
					<div class="w-full">
						<div class="flex flex-row divide-x rounded-xl border shadow-2xl">
							<article class="flex w-1/2 flex-col divide-y">
								<div class="flex min-h-[90px] items-center justify-center p-4 text-sm font-bold">
									<p>OTROS</p>
								</div>
								{
									text.comparative.others.map((item) => (
										<div class="min-h-[125px] break-words p-4 text-zinc-500 even:bg-primary/5">
											<p>{item}</p>
										</div>
									))
								}
							</article>
							<article class="flex w-1/2 flex-col divide-y">
								<div class="flex min-h-[90px] items-center justify-center p-4">
									<img src="logo-nav.png" class="h-8" alt="Logo Sumametros" />
								</div>
								{
									text.comparative.us.map((item) => (
										<div class="flex min-h-[125px] items-start gap-2 p-4 even:bg-primary/5">
											<Icon
												name="tabler:check"
												class="hidden h-6 w-6 flex-shrink-0 text-primary md:inline-block"
											/>
											<p>{item}</p>
										</div>
									))
								}
							</article>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="border-y py-16">
			<div class="mx-auto w-full max-w-screen-xl px-4">
				<div class="rounded-2xl bg-navy p-16 text-white">
					<div class="flex flex-col items-stretch gap-4 md:flex-row">
						<div class="w-full max-w-sm">
							<h2 class="font-display text-2xl font-bold">
								¿Cómo funciona comprar en Suma Metros?
							</h2>
						</div>
						<div class="flex w-full flex-col items-start gap-4">
							<p>Comprar con nosotros es muy sencillo:</p>
							<div class="flex-1 flex-col">
								{
									text.steps.steps.map((step, index) => (
										<article class="flex items-stretch gap-4">
											<div class="flex flex-col items-center">
												<div class="flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-full bg-white font-bold text-navy">
													{index + 1}
												</div>
												{index !== text.steps.steps.length - 1 && (
													<div class="h-full  w-px bg-white" />
												)}
											</div>
											<p class="min-h-[80px] pb-4">{step}</p>
										</article>
									))
								}
							</div>
							<a
								class="inline-flex rounded-md bg-primary px-8 py-4 text-sm font-bold text-white hover:bg-primary/90"
								href="#">Quiero invertir</a
							>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="border-b py-16">
			<div class="mx-auto w-full max-w-screen-xl px-4">
				<div class="rounded-3xl bg-navy bg-cover p-4 md:p-8">
					<div class="rounded-2xl border bg-white p-8 text-center md:p-16">
						<div class="mx-auto flex flex-col items-center gap-8">
							<img src={text.about.logo} alt="Logo Suma Metros" class="h-16" />
							<h2 class="font-display text-xl font-bold md:text-2xl">
								{text.about.title}
							</h2>
							<p>
								{text.about.description}
							</p>
							<div class="flex flex-wrap gap-4 md:flex-nowrap">
								{
									text.about.stats.map((item) => (
										<dl class="flex w-full flex-col items-center justify-between text-center">
											<dt class="text-xs font-medium">{item.title}</dt>
											<dd class="font-display text-2xl font-bold">{item.value}</dd>
										</dl>
									))
								}
							</div>
							<a
								href="https://begrand.mx"
								target="_blank"
								class="inline-flex items-center justify-center gap-2 rounded-md border border-navy/20 px-8 py-3 text-sm font-semibold text-navy"
								>Conocer más</a
							>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="bg-zinc-50 py-16">
			<div class="mx-auto w-full max-w-screen-xl px-4">
				<div class="flex flex-col gap-2 text-center">
					<h2 class="font-display text-2xl font-bold">Preguntas frecuentes</h2>
					<p>
						Sabemos que tienes algunas dudas, por eso estamos aquí para responder todas tus
						preguntas.
					</p>
				</div>
				<div class="mx-auto w-full max-w-2xl py-8">
					<div class="flex w-full flex-col gap-4">
						{
							faqs.map((faq) => (
								<details class="w-full cursor-pointer rounded-lg border bg-white shadow-sm">
									<summary class="p-4 font-bold">{faq.question}</summary>
									<div class="px-4 pb-4">
										<p>{faq.answer}</p>
									</div>
								</details>
							))
						}
					</div>
				</div>
			</div>
		</section>
		<footer class="border-t py-8">
			<div class="mx-auto w-full max-w-screen-xl px-4">
				<div class="mb-8 flex flex-col items-start justify-between gap-4 md:flex-row">
					<div class="flex flex-col items-center gap-8 md:flex-row">
						<div>
							<p class="text-xs text-zinc-500">Con tecnología de</p>
							<img src="logo-briq.svg" alt="Logo Briq" class="h-8" />
						</div>
						<div class="h-8 w-1 bg-navy"></div>
						<div>
							<p class="max-w-md text-sm">
								Este es un espacio en briq.mx todas tus operaciones son seguras.
								<a href="https://briq.mx" class="text-primary">Conoce más</a>
							</p>
						</div>
					</div>
					<nav class="flex items-center gap-4">
						<a
							href={text.social.facebook}
							target="_blank"
							class="flex items-center gap-1 text-xs font-medium"
						>
							<Icon name="bxl:facebook" class="h-6 w-6" />
							<span>Be Grand</span>
						</a>
						<a
							href={text.social.instagram}
							target="_blank"
							class="flex items-center gap-1 text-xs font-medium"
						>
							<Icon name="bxl:instagram" class="h-6 w-6" />
							<span>@begrand</span>
						</a>
					</nav>
				</div>
			</div>
		</footer>
	</main>

	<div
		class="fixed inset-0 z-20 hidden h-full w-full flex-col items-center justify-start overflow-hidden bg-white/90 px-2 py-8 backdrop-blur-md"
		id="modal"
	>
		<div class="w-full max-w-md rounded-2xl border bg-white shadow-md">
			<div class="flex items-center justify-between gap-2 px-8 pt-8">
				<h2 class="font-display text-2xl font-bold">¡Ya estamos muy cerca!</h2>
				<button
					id="close-modal"
					class="flex h-8 w-8 items-center justify-center rounded-full border hover:bg-primary/5"
				>
					<Icon name="tabler:x" />
				</button>
			</div>
			<div class="flex flex-col gap-2 p-8">
				<p>
					Muy pronto podrás ir sumando metros para hacer tu patrimonio. Si quieres ser de las
					primeras personas en enterarse, déjanos tus datos.
				</p>
				<div class="flex flex-col gap-2 rounded-xl border bg-primary/5 p-4">
					<h3 class="font-display font-bold">Déjanos tus datos</h3>
					<Form client:load />
				</div>
			</div>
		</div>
	</div>

	<style>
		.fade-in {
			animation: fadeIn 0.5s ease-in-out forwards;
			opacity: 0;
			transform: translateY(20px);
		}

		.fade-out {
			animation: fadeOut 0.5s ease-in-out forwards;
			opacity: 1;
			transform: translateY(0);
		}

		@keyframes fadeIn {
			0% {
				opacity: 0;
				transform: translateY(20px) translateX(-50%);
			}
			100% {
				opacity: 1;
				transform: translateY(0) translateX(-50%);
			}
		}

		@keyframes fadeOut {
			0% {
				opacity: 1;
				transform: translateY(0) translateX(-50%);
			}
			100% {
				opacity: 0;
				transform: translateY(20px) translateX(-50%);
			}
		}

		html {
			scroll-behavior: smooth;
			scroll-margin-top: 30px;
			scroll-padding-top: -100px;
		}
	</style>

	<script is:inline>
		// Get the #notification element
		const data = [
			{
				name: 'Gabriela',
				amount: '3m²',
				project: 'BeGrand® Reforma'
			},
			{
				name: 'Eduardo',
				amount: '2m²',
				project: 'Vitant® Santa Lucía'
			},
			{
				name: 'Luis',
				amount: '1m²',
				project: 'Vitant® Garza Sada'
			}
		]
		let dataIndex = 0
		const notification = document.getElementById('notification')
		const notificationAvatar = document.getElementById('notification-avatar')
		const notificationName = document.getElementById('notification-name')
		const notificationValue = document.getElementById('notification-value')
		const notificationProperty = document.getElementById('notification-property')

		// Function to update notification
		function updateNotification() {
			// Update notification data
			notificationName.textContent = data[dataIndex].name
			notificationValue.textContent = data[dataIndex].amount
			notificationAvatar.textContent = data[dataIndex].name[0]
			notificationProperty.textContent = data[dataIndex].project

			// Show the notification
			notification.classList.add('fade-in')
			notification.classList.remove('fade-out')

			// Hide the notification after 1.5 seconds
			setTimeout(() => {
				notification.classList.remove('fade-in')
				notification.classList.add('fade-out')
			}, 2500)

			// Move to the next data item
			dataIndex = (dataIndex + 1) % data.length
		}

		// Update notification every 2 seconds
		setInterval(updateNotification, 3000)
	</script>
	<script is:inline>
		const modal = document.getElementById('modal')
		// Get all the links with href="#modal"
		const modalLinks = document.querySelectorAll('a[href="#modal"]')

		// Ad a click event listener to each of them to open the modal
		modalLinks.forEach((link) => {
			link.addEventListener('click', (e) => {
				e.preventDefault()
				modal.classList.remove('hidden')
				modal.classList.add('flex')
			})
		})

		document.getElementById('close-modal').addEventListener('click', () => {
			modal.classList.remove('flex')
			modal.classList.add('hidden')
		})
	</script>
</Layout>
